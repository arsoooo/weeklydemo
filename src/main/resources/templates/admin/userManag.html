<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <script src="layui/layui.js"></script>
</head>
<body>

<div id="tableData" lay-filter="tableData"></div>


<script type="text/html" id="protoolbar">
    <div class="layui-btn layui-btn-sm" lay-event="seepro">查看</div>
</script>
<script type="text/html" id="publitoolbar">
    <div class="layui-btn layui-btn-sm" lay-event="seepubli">查看</div>
</script>
<script type="text/html" id="toolbar">
    <div class="layui-btn layui-btn-sm" lay-event="see">查看</div>
    <div class="layui-btn layui-btn-sm layui-btn-danger" lay-event="delete">删除</div>
</script>

<script>
    layui.use(['layer','table'],function () {
        let  layer = layui.layer,
            table = layui.table;

        table.render({
            elem:"#tableData",
            url:"users",
            method:"get",
            cols:[
                [
                    {field: 'id', title: 'ID', width:"10%", sort: true},
                    {field: 'name', title: '用户名', width: "15%"},
                    {field: 'projectName', title: '项目', width: "25%", align: 'center', toolbar: '#protoolbar'},
                    {field: 'publiName', title: '周报', width: "25%", align: 'center', toolbar: '#publitoolbar'},
                    {fixed: 'right', title: '操作', width: "25%", align: 'center', toolbar: '#toolbar'}
            ]
            ]
        })

        table.on("tool(tableData)",function (obj) {
            // var checkStatus = table.checkStatus(obj.config.id); //获取选中行状态
            console.log(obj)
            let event = obj.event;
            var data = obj.data;  // 获取选中行的信息
            if(event === "see"){
                var url = "adminEditUser/" + data.id+ "/" +data.userName;
                // layer.alert('编辑行：<br>'+ data.id + data.name);

                // location.href = "adminEditUser/" + id;
                // layer.open({
                //     type: 2,
                //     area: ['500px','600px'],
                //     fix: false, //不固定
                //     maxmin: true,
                //     shadeClose: true,
                //     shade: 0.4,
                //     title: "人员查看详情",
                //     content: "admin/userManagInfo.html"
                // });
            }else if (event === "delete"){
                layer.confirm('是否要删除？', {
                    btn: ['确定','取消'] //按钮
                }, function(){
                    layer.msg("删除成功");
                });
            }else if(event === "seepro"){
                // 跳转至查看个人项目
                var url = "adminListUserProject?uid=" + data.id;
                location.href = url;
            }else if(event === "seepubli"){
                layer.open({
                    type: 2,
                    area: ['500px','600px'],
                    fix: false, //不固定
                    maxmin: true,
                    shadeClose: true,
                    shade: 0.4,
                    title: "查看个人周报详情",
                    content: "./perspubli.html"
                });
            }
        })
    })
</script>
</body>
</html>